#
# $Id: Imakefile,v 1.6.8.1 1999-11-08 20:53:33 tb Exp $
#

PROJECT= gms
SERVER= messaged

ETOBJS= gethost_err.o globalmessage_err.o hesiod_err.o
OBJS= get_a_message.o get_fallback_file.o get_message.o get_message_from_server.o get_servername.o gethost_errors.o hesiod_errors.o put_fallback_file.o read_to_memory.o view_message_by_tty.o view_message_by_zephyr.o check_viewable.o

DEFINES= -I.

LIB= lib${PROJECT}.a

#ifdef ultrix
LIBS= -lhesiod -lcom_err -lnsyslog
#else
LIBS= -lhesiod -lcom_err
#endif

error_table(gethost_err)
error_table(globalmessage_err)
error_table(hesiod_err)

create_dir($(ATHBINDIR))
create_dir($(ATHETCDIR))
create_dir($(ATHMANDIR)/man1)

SimpleProgram(get_message,$(LIB),$(LIBS),$(ATHBINDIR))
SimpleProgram($(SERVER),message_daemon.o $(LIB),$(LIBS),$(ATHETCDIR))

install_man(get_message.1,get_message.1)

build_library($(PROJECT),$(ETOBJS) $(OBJS))
